<!-- Custom scripts -->
<script type="text/javascript">
  (function () {
    const basicData = {
      columns: ['Name', 'Position', 'Office', 'Age', 'Start date', 'Salary'],
      rows: [
        ['Tiger Nixon', 'System Architect', 'Edinburgh', '61', '2011/04/25', '$320,800'],
        ['Garrett Winters', 'Accountant', 'Tokyo', '63', '2011/07/25', '$170,750'],
        [
          'Ashton Cox',
          'Junior Technical Author',
          'San Francisco',
          '66',
          '2009/01/12',
          '$86,000',
        ],
        [
          'Cedric Kelly',
          'Senior Javascript Developer',
          'Edinburgh',
          '22',
          '2012/03/29',
          '$433,060',
        ],
        ['Airi Satou', 'Accountant', 'Tokyo', '33', '2008/11/28', '$162,700'],
        [
          'Brielle Williamson',
          'Integration Specialist',
          'New York',
          '61',
          '2012/12/02',
          '$372,000',
        ],
        ['Herrod Chandler', 'Sales Assistant', 'San Francisco', '59', '2012/08/06', '$137,500'],
        ['Rhona Davidson', 'Integration Specialist', 'Tokyo', '55', '2010/10/14', '$327,900'],
        [
          'Colleen Hurst',
          'Javascript Developer',
          'San Francisco',
          '39',
          '2009/09/15',
          '$205,500',
        ],
        ['Sonya Frost', 'Software Engineer', 'Edinburgh', '23', '2008/12/13', '$103,600'],
        ['Jena Gaines', 'Office Manager', 'London', '30', '2008/12/19', '$90,560'],
        ['Quinn Flynn', 'Support Lead', 'Edinburgh', '22', '2013/03/03', '$342,000'],
        [
          'Charde Marshall',
          'Regional Director',
          'San Francisco',
          '36',
          '2008/10/16',
          '$470,600',
        ],
        [
          'Haley Kennedy',
          'Senior Marketing Designer',
          'London',
          '43',
          '2012/12/18',
          '$313,500',
        ],
      ],
    };

    const extendedData = {
      columns: [
        { label: 'Name', field: 'name' },
        { label: 'Position', field: 'position' },
        { label: 'Office', field: 'office' },
        { label: 'Age', field: 'age' },
        { label: 'Start date', field: 'date' },
        { label: 'Salary', field: 'salary' },
      ],
      rows: [
         {
          name: 'Tiger Nixon',
          position: 'System Architect',
          office: 'Edinburgh',
          age: 61,
          date: '2011/04/25',
          salary: '$320,800',
        },
        {
          name: 'Garrett Winters',
          position: 'Accountant',
          office: 'Tokyo',
          age: 63,
          date: '2011/07/25',
          salary: '$170,750',
        },
        {
          name: 'Ashton Cox',
          position: 'Junior Technical Author',
          office: 'San Francisco',
          age: 66,
          date: '2009/01/12',
          salary: '$86,000',
        },
        {
          name: 'Cedric Kelly',
          position: 'Senior Javascript Developer',
          office: 'Edinburgh',
          age: 22,
          date: '2012/03/29',
          salary: '$433,060',
        },
        {
          name: 'Airi Satou',
          position: 'Accountant',
          office: 'Tokyo',
          age: 33,
          date: '2008/11/28',
          salary: '$162,700',
        },
        {
          name: 'Brielle Williamson',
          position: 'Integration Specialist',
          office: 'New York',
          age: 61,
          date: '2012/12/02',
          salary: '$372,000',
        },
        {
          name: 'Herrod Chandler',
          position: 'Sales Assistant',
          office: 'San Francisco',
          age: 59,
          date: '2012/08/06',
          salary: '$137,500',
        },
        {
          name: 'Rhona Davidson',
          position: 'Integration Specialist',
          office: 'Tokyo',
          age: 55,
          date: '2010/10/14',
          salary: '$327,900',
        },
        {
          name: 'Colleen Hurst',
          position: 'Javascript Developer',
          office: 'San Francisco',
          age: 39,
          date: '2009/09/15',
          salary: '$205,500',
        },
        {
          name: 'Sonya Frost',
          position: 'Software Engineer',
          office: 'Edinburgh',
          age: 23,
          date: '2008/12/13',
          salary: '$103,600',
        },
        {
          name: 'Jena Gaines',
          position: 'Office Manager',
          office: 'London',
          age: 30,
          date: '2008/12/19',
          salary: '$90,560',
        },
        {
          name: 'Quinn Flynn',
          position: 'Support Lead',
          office: 'Edinburgh',
          age: 22,
          date: '2013/03/03',
          salary: '$342,000',
        },
        {
          name: 'Charde Marshall',
          position: 'Regional Director',
          office: 'San Francisco',
          age: 36,
          date: '2008/10/16',
          salary: '$470,600',
        },
        {
          name: 'Haley Kennedy',
          position: 'Senior Marketing Designer',
          office: 'London',
          age: 43,
          date: '2012/12/18',
          salary: '$313,500',
        },
      ],
    };

    const advancedData = {
      columns: [
        { label: 'Name', field: 'name', sort: true },
        { label: 'Position', field: 'position', sort: false },
        { label: 'Office', field: 'office', sort: false },
        { label: 'Age', field: 'age', sort: false },
        { label: 'Start date', field: 'date', sort: true },
        { label: 'Salary', field: 'salary', sort: false },
      ],
      rows: [
        {
          name: 'Tiger Nixon',
          position: 'System Architect',
          office: 'Edinburgh',
          age: 61,
          date: '2011/04/25',
          salary: '$320,800',
        },
        {
          name: 'Garrett Winters',
          position: 'Accountant',
          office: 'Tokyo',
          age: 63,
          date: '2011/07/25',
          salary: '$170,750',
        },
        {
          name: 'Ashton Cox',
          position: 'Junior Technical Author',
          office: 'San Francisco',
          age: 66,
          date: '2009/01/12',
          salary: '$86,000',
        },
        {
          name: 'Cedric Kelly',
          position: 'Senior Javascript Developer',
          office: 'Edinburgh',
          age: 22,
          date: '2012/03/29',
          salary: '$433,060',
        },
        {
          name: 'Airi Satou',
          position: 'Accountant',
          office: 'Tokyo',
          age: 33,
          date: '2008/11/28',
          salary: '$162,700',
        },
        {
          name: 'Brielle Williamson',
          position: 'Integration Specialist',
          office: 'New York',
          age: 61,
          date: '2012/12/02',
          salary: '$372,000',
        },
        {
          name: 'Herrod Chandler',
          position: 'Sales Assistant',
          office: 'San Francisco',
          age: 59,
          date: '2012/08/06',
          salary: '$137,500',
        },
        {
          name: 'Rhona Davidson',
          position: 'Integration Specialist',
          office: 'Tokyo',
          age: 55,
          date: '2010/10/14',
          salary: '$327,900',
        },
        {
          name: 'Colleen Hurst',
          position: 'Javascript Developer',
          office: 'San Francisco',
          age: 39,
          date: '2009/09/15',
          salary: '$205,500',
        },
        {
          name: 'Sonya Frost',
          position: 'Software Engineer',
          office: 'Edinburgh',
          age: 23,
          date: '2008/12/13',
          salary: '$103,600',
        },
        {
          name: 'Jena Gaines',
          position: 'Office Manager',
          office: 'London',
          age: 30,
          date: '2008/12/19',
          salary: '$90,560',
        },
        {
          name: 'Quinn Flynn',
          position: 'Support Lead',
          office: 'Edinburgh',
          age: 22,
          date: '2013/03/03',
          salary: '$342,000',
        },
        {
          name: 'Charde Marshall',
          position: 'Regional Director',
          office: 'San Francisco',
          age: 36,
          date: '2008/10/16',
          salary: '$470,600',
        },
        {
          name: 'Haley Kennedy',
          position: 'Senior Marketing Designer',
          office: 'London',
          age: 43,
          date: '2012/12/18',
          salary: '$313,500',
        },
      ],
    };

    const basicDatatables = [
      'datatable-scroll',
      'datatable-fixed',
      'datatable-search',
    ];

    const advancedDatatables = [
      'datatable-advanced-search',
    ];

    basicDatatables.forEach((datatable) => {
      new mdb.Datatable(document.getElementById(datatable), basicData);
    });

    advancedDatatables.forEach((datatable) => {
      new mdb.Datatable(document.getElementById(datatable), extendedData);
    });

    // Search

    document.getElementById('datatable-search-input').addEventListener('input', (e) => {
      const instance = mdb.Datatable.getInstance(document.getElementById('datatable-search'));

      instance.search(e.target.value);
    });

    const advancedSearchInput = document.getElementById('advanced-search-input');

    const search = (value) => {
      const instance = mdb.Datatable.getInstance(
        document.getElementById('datatable-advanced-search')
      );

      let [phrase, columns] = value.split(' in:').map((str) => str.trim());

      if (columns) {
        columns = columns.split(',').map((str) => str.toLowerCase().trim());
      }

      instance.search(phrase, columns);
    };

    document
      .getElementById('advanced-search-button')
      .addEventListener('click', (e) => search(advancedSearchInput.value));

    advancedSearchInput.addEventListener('keydown', (e) => {
      if (e.keyCode === 13) search(e.target.value);
    });

    // Search

    // Custom HTML content

    const customDatatable = document.getElementById('datatable-custom');

    const setActions = () => {
      document.getElementsByClassName('call-btn').forEach((btn) => {
        btn.addEventListener('click', () => {
          console.log(`call ${btn.attributes['data-mdb-number'].value}`);
        });
      });

      document.getElementsByClassName('message-btn').forEach((btn) => {
        btn.addEventListener('click', () => {
          console.log(`send a message to ${btn.attributes['data-mdb-email'].value}`);
        });
      });
    };

    customDatatable.addEventListener('render.mdb.datatable', setActions);

    new mdb.Datatable(customDatatable, {
      columns: [
        { label: 'Name', field: 'name' },
        { label: 'Position', field: 'position' },
        { label: 'Office', field: 'office' },
        { label: 'Contact', field: 'contact', sort: false },
      ],
      rows: [
        {
          name: 'Tiger Nixon',
          position: 'System Architect',
          office: 'Edinburgh',
          phone: '+48000000000',
          email: 'tiger.nixon@gmail.com',
        },
        {
          name: 'Sonya Frost',
          position: 'Software Engineer',
          office: 'Edinburgh',
          phone: '+53456123456',
          email: 'sfrost@gmail.com',
        },
        {
          name: 'Tatyana Fitzpatrick',
          position: 'Regional Director',
          office: 'London',
          phone: '+42123432456',
          email: 'tfitz@gmail.com',
        },
      ].map((row) => {
        return {
          ...row,
          contact: `<button class="call-btn btn btn-outline-primary btn-floating btn-sm" data-mdb-number="${row.phone}"><i class="fa fa-phone"></i></button>
                <button class="message-btn btn ms-2 btn-primary btn-floating btn-sm" data-mdb-email="${row.email}"><i class="fa fa-envelope"></i></button>`,
        };
      }),
    });

    // Custom HTML content

    // Async Data
    const asyncCols = [
      { label: 'Email', field: 'email' },
      { label: 'Name', field: 'name' },
      { label: 'Phone', field: 'phone' },
      { label: 'Username', field: 'username' },
      { label: 'Website', field: 'website' },
      { label: 'Address', field: 'address' },
      { label: 'Company', field: 'company' },
    ];
    const asyncTable = new mdb.Datatable(
      document.getElementById('datatable-async-data'),
      {
        columns: asyncCols,
      },
      { loading: true }
    );

    const loadData = () => {
      fetch('https://jsonplaceholder.typicode.com/users')
        .then((response) => response.json())
        .then((data) => {
          asyncTable.update(
            {
              rows: data.map((user) => ({
                ...user,
                address: `${user.address.city}, ${user.address.street}`,
                company: user.company.name,
              })),
            },
            { loading: false }
          );
        });
    };

    document.getElementById('reload-button').addEventListener('click', () => {
      asyncTable.update(null, { loading: true });
      setTimeout(loadData, 3000);
    });
  })();

</script>
